---
name: jp-debug
description: ログ、データベースの状態、git履歴、コードを調査して変更を加えずに問題をデバッグします。何かが壊れていて根本原因を調査する必要がある場合に使用します。
compatibility: GitHub Copilot CLI用に設計
metadata:
  author: humanlayer
  version: "1.0"
  original-source: https://github.com/humanlayer/humanlayer
---

# デバッグ

手動テストまたは実装中の問題のデバッグを支援するタスクです。このスキルでは、ファイルを編集せずにログ、データベースの状態、コード、git履歴を調査して問題を調べることができます。

## 初期レスポンス

計画/チケットファイル付きで呼び出された場合：
```
[ファイル名]の問題のデバッグをお手伝いします。現在の状態を理解させてください。

どのような問題が発生していますか？
- 何をテスト/実装しようとしていましたか？
- 何がうまくいかなかったですか？
- エラーメッセージはありますか？

ログ、データベース、gitの状態を調査して、何が起こっているかを解明します。
```

パラメータなしで呼び出された場合：
```
現在の問題のデバッグをお手伝いします。

何がうまくいっていないか説明してください：
- 何に取り組んでいますか？
- どのような具体的な問題が発生しましたか？
- 最後に正常に動作したのはいつですか？

ログ、データベースの状態、最近の変更を調査して問題を特定します。
```

## プロセスステップ

### ステップ1：問題を理解する

ユーザーが問題を説明した後：

1. **提供されたコンテキストを読み込む**（計画またはチケットファイル）：
   - 何を実装/テストしているかを理解する
   - どのフェーズまたはステップにいるかを記録する
   - 期待される動作と実際の動作を特定する

2. **クイック状態チェック**：
   - 現在のgitブランチと最近のコミット
   - コミットされていない変更
   - 問題が発生し始めた時期

### ステップ2：問題を調査する

効率的な調査のために、並行して `task` エージェントを `explore` タイプで生成する：

**タスク1 - 最近のログを確認：**
```
エラーがないか最新のログを見つけて分析する：
1. 一般的な場所でログファイルを検索する
2. 問題の時間帯周辺のエラー、警告、問題を検索する
3. スタックトレースや繰り返しのエラーを探す
返却：タイムスタンプ付きの主要なエラー/警告
```

**タスク2 - データベースの状態（該当する場合）：**
```
現在のデータベースの状態を確認する：
1. データベースに接続する
2. スキーマと最近のデータを確認する
3. スタックした状態や異常を探す
返却：関連するデータベースの発見事項
```

**タスク3 - Gitとファイルの状態：**
```
最近何が変わったかを理解する：
1. gitの状態と現在のブランチを確認する
2. 最近のコミットを確認する：git log --oneline -10
3. コミットされていない変更を確認する：git diff
4. 期待されるファイルの存在を確認する
返却：Gitの状態とファイルの問題
```

### ステップ3：調査結果を提示する

調査に基づいて、焦点を絞ったデバッグレポートを提示する：

```markdown
## デバッグレポート

### 問題の内容
[証拠に基づく問題の明確な説明]

### 発見された証拠

**ログから**：
- [タイムスタンプ付きのエラー/警告]
- [パターンまたは繰り返しの問題]

**データベースから**（該当する場合）：
- [データベースからの発見]

**Git/ファイルから**：
- [関連する可能性のある最近の変更]
- [ファイルの状態の問題]

### 根本原因
[証拠に基づく最も可能性の高い説明]

### 次のステップ

1. **まずこれを試す**：
   ```bash
   [具体的なコマンドまたはアクション]
   ```

2. **それでもうまくいかない場合**：
   - [代替アプローチ]
   - [別の試行方法]

### さらに調査できない場合
一部の問題には以下が必要な場合があります：
- ブラウザコンソールエラー（ブラウザでF12）
- 外部サービスのログ
- システムレベルのデバッグ

さらに具体的なことを調査しましょうか？
```

## 重要な注意事項

- **調査に焦点を当てる** - これはデバッグ用であり、修正用ではない
- **常に問題の説明を求める** - 何が問題かわからなければデバッグできない
- **ファイルを完全に読み込む** - コンテキスト読み込み時に部分的な読み込みをしない
- **ユーザーに案内を返す** - 一部の問題は手動調査が必要
- **変更を加えない** - 観察して報告し、修正はユーザーに任せる
